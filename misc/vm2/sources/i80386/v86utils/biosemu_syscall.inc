;------------------------------- general purpose...
flagVals_carry equ 0            ;0001h - carry flag...
flagVals_parity equ 2           ;0004h - parity flag...
flagVals_auxiliary equ 4        ;0010h - auxiliary carry flag...
flagVals_zero equ 6             ;0040h - zero flag...
flagVals_sign equ 7             ;0080h - sign flag...
flagVals_trap equ 8             ;0100h - trap flag...
flagVals_interrupt equ 9        ;0200h - interrupt flag...
flagVals_direction equ 10       ;0400h - direction flag...
flagVals_overflow equ 11        ;0800h - overflow flag...
;-------------------------------

;------------------------------- file modes...
fileMode_n equ 000h             ;none...
fileMode_r equ 001h             ;read...
fileMode_w equ 002h             ;write...
fileMode_rw equ 003h            ;read+write...
fileMode_sn equ 000h            ;allow none...
fileMode_sr equ 100h            ;allow read...
fileMode_sw equ 200h            ;allow write...
fileMode_srw equ 300h           ;allow read+write...
;-------------------------------

;------------------------------- terminate process...
proc kernel_terminate
sub eax,eax
clts                            ;terminate process...
dw 00h
jmp byte kernel_terminate
endp
;-------------------------------

;------------------------------- sleep...
proc kernel_relequish
clts                            ;give away the control...
dw 01h
ret
endp
;-------------------------------

;------------------------------- get uptime info...
proc kernel_getUptime1
;out: eax-days since running...
;     ecx-ticks since last day change...
;     edx-ticks per second...
clts                            ;get uptime info...
dw 2ah
ret
endp
;-------------------------------

;------------------------------- get uptime info...
proc kernel_getUptime2
;out: eax-ticks since last day change...
clts                            ;get uptime info...
dw 2bh
ret
endp
;-------------------------------

;------------------------------- get system date...
proc kernel_getDate
;out: eax-year...
;     ebx-month...
;     ecx-day...
clts                            ;get system date...
dw 2ch
ret
endp
;-------------------------------

;------------------------------- get system time...
proc kernel_getTime
;out: eax-hour...
;     ebx-minute...
;     ecx-second...
clts                            ;get system time...
dw 2dh
ret
endp
;-------------------------------

;------------------------------- give away the control...
proc kernel_sleep
clts                            ;give away the control...
dw 01h
ret
endp
;-------------------------------

;------------------------------- write to console...
proc kernel_conWrite
;in: esi-buffer to write...
;    ecx-bytes in buffer...
clts                            ;write to console...
dw 20h
ret
endp
;-------------------------------

;------------------------------- read from console...
proc kernel_conRead
;in:  edi-buffer to read to...
;     ecx-bytes to read...
;out: ecx-bytes readed...
clts                            ;read from console...
dw 21h
ret
endp
;-------------------------------

;------------------------------- get current drive statistics...
proc kernel_diskStat
;out: eax-free blocks...
;     ebx-used blocks...
;     ecx-bad blocks...
;     edx-block size in bytes...
clts                            ;get current drive statistics...
dw 3bh
ret
endp
;-------------------------------

;------------------------------- get current directory...
proc kernel_dirGet
;in: in: edi-where to copy current directory pathname...
clts                            ;get current directory...
dw 31h
ret
endp
;-------------------------------

;------------------------------- change current directory...
proc kernel_dirChg
; in: esi-pathname of directory to change to...
;out: ebx-error code...
clts                            ;change current directory...
dw 32h
ret
endp
;-------------------------------

;------------------------------- create directory...
proc kernel_dirCrt
; in: esi-pathname of new directory to create...
;out: ebx-error code...
clts                            ;create directory...
dw 33h
ret
endp
;-------------------------------

;------------------------------- erase directory...
proc kernel_dirDel
; in: esi-pathname of directory to erase...
;out: ebx-error code...
clts                            ;erase directory...
dw 34h
ret
endp
;-------------------------------

;------------------------------- create file...
proc kernel_fileCrt
; in: esi-pathname of new file to create...
;out: ebx-error code...
clts                            ;create file...
dw 35h
ret
endp
;-------------------------------

;------------------------------- erase file...
proc kernel_fileDel
; in: esi-pathname of file to erase...
;out: ebx-error code...
clts                            ;erase file...
dw 36h
ret
endp
;-------------------------------

;------------------------------- rename dir entry...
proc kernel_rename
; in: esi-pathname of source entry...
;     edi-pathname of target entry...
;out: ebx-error code...
clts                            ;rename dir entry...
dw 37h
ret
endp
;-------------------------------

;------------------------------- open directory...
proc kernel_dirOpen
;in:  esi-pathname of directory...
;out: ebx-error code...
;     eax-handler of open directory...
clts                            ;open directory...
dw 3ch
ret
endp
;-------------------------------

;------------------------------- read directory...
proc kernel_dirRead
;in:  eax-handler of open directory...
;     edi-where to get data...
;out: ebx-error code...
;note: the data has the following structure:
;      size,rights,owner:dword
;      create,modify:time
;      name:string[255]
clts                            ;read directory...
dw 3dh
ret
endp
;-------------------------------

;------------------------------- close directory...
proc kernel_dirClose
;in:  eax-handler of open directory...
;out: ebx-error code...
clts                            ;close directory...
dw 3eh
ret
endp
;-------------------------------

;------------------------------- open file...
proc kernel_fileOpen
;in:  esi-pathname of file...
;     eax-access rights...
;out: ebx-error code...
;     eax-handler of open file...
clts                            ;open file...
dw 3fh
ret
endp
;-------------------------------

;------------------------------- read from file...
proc kernel_fileRead
;in:  eax-handler of open file...
;     edi-offset where to read...
;     ecx-bytes to read...
;out: ebx-error code...
clts                            ;read from file...
dw 40h
ret
endp
;-------------------------------

;------------------------------- write to file...
proc kernel_fileWrite
;in:  eax-handler of open file...
;     esi-offset where from write...
;     ecx-bytes to write...
;out: ebx-error code...
clts                            ;write to file...
dw 41h
ret
endp
;-------------------------------

;------------------------------- seek in file...
proc kernel_fileSeek
;in:  eax-handler of open file...
;     ecx-position where to seek...
;out: ebx-error code...
clts                            ;seek in file...
dw 42h
ret
endp
;-------------------------------

;------------------------------- get file size...
proc kernel_fileSize
;in:  eax-handler of open file...
;out: ebx-error code...
;     ecx-size of file in bytes...
clts                            ;get file size...
dw 43h
ret
endp
;-------------------------------

;------------------------------- get file position...
proc kernel_filePos
;in:  eax-handler of open file...
;out: ebx-error code...
;     ecx-file position...
clts                            ;get file position...
dw 44h
ret
endp
;-------------------------------

;------------------------------- truncate file...
proc kernel_fileTrunc
;in:  eax-handler of open file...
;out: ebx-error code...
clts                            ;truncate file...
dw 45h
ret
endp
;-------------------------------

;------------------------------- close file...
proc kernel_fileClose
;in:  eax-handler of open file...
;out: ebx-error code...
clts                            ;close file...
dw 46h
ret
endp
;-------------------------------

;------------------------------- find process by name...
proc kernel_findproc
;in:  esi-process name to find...
;out: eax-process id /0=error...
clts
dw 0dh
ret
endp
;-------------------------------

;------------------------------- create new pipeline...
proc kernel_pipeOpen
;in:  eax-process id...
;     ecx-size in bytes...
;     bl-block mode pipe...
;out: ebx-error code...
;     eax-new pipeline id...
clts
dw 17h
ret
endp
;-------------------------------

;-------------------------------
proc kernel_pipeClose
;in:  eax-pipeline id...
;out: ebx-error code...
clts
dw 18h
ret
endp
;-------------------------------

;-------------------------------
proc kernel_pipeInfo
; in: eax-pipeline id...
;out: ebx-error code...
;     eax-process id of remote...
;     ecx-bytes free in tx buffer...
;     edx-bytes waiting in rx buffer...
clts
dw 19h
ret
endp
;-------------------------------

;-------------------------------
proc kernel_pipeSend
; in: eax-pipeline id...
;     esi-buffer to send...
;     ecx-bytes in buffer...
;out: ebx-error code...
clts
dw 1ah
ret
endp
;-------------------------------

;-------------------------------
proc kernel_pipeRecv
; in: eax-pipeline id...
;     edi-buffer to receive...
;     ecx-max bytes to receive...
;out: ebx-error code...
;     ecx-bytes received...
clts
dw 1bh
ret
endp
;-------------------------------
