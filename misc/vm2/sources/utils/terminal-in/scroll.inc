Procedure doFillArea(x1,y1,x2,y2,ch,co:LongInt);
Var i,o,p,q,r:LongInt;
Begin;
if (x1<0) then x1:=0;
if (y1<0) then y1:=0;
if (x2>=screenMaxX) then x2:=screenMaxX-1;
if (y2>=screenMaxY) then y2:=screenMaxY-1;
if (x1>x2) then exit;
if (y1>y2) then exit;
r:=y1*screenMaxX+x1;
if (ch>=0) and (co>=0) then begin;
  for o:=y1 to y2 do begin;
    p:=r;
    for i:=x1 to x2 do begin;
      screenData[p].c:=ch;
      screenData[p].a:=co;
      inc(p);
      end;
    inc(r,screenMaxX);
    end;
  exit;
  end;
if (ch>=0) then begin;
  for o:=y1 to y2 do begin;
    p:=r;
    for i:=x1 to x2 do begin;
      screenData[p].c:=ch;
      inc(p);
      end;
    inc(r,screenMaxX);
    end;
  exit;
  end;
if (co>=0) then begin;
  for o:=y1 to y2 do begin;
    p:=r;
    for i:=x1 to x2 do begin;
      screenData[p].a:=co;
      inc(p);
      end;
    inc(r,screenMaxX);
    end;
  exit;
  end;
End;



Procedure doScrollDown(x1,y1,x2,y2,ln,ch,co:LongInt);
Var i,o,p,q,r:LongInt;
Begin;
if (x1<0) then x1:=0;
if (y1<0) then y1:=0;
if (x2>=screenMaxX) then x2:=screenMaxX-1;
if (y2>=screenMaxY) then y2:=screenMaxY-1;
if (x1>x2) then exit;
if (y1>y2) then exit;
if (ln<1) then exit;
q:=y2-y1+1;
if (ln>q) then ln:=q;
r:=y2*screenMaxX+x1;
p:=r-(ln*screenMaxX);
o:=(x2-x1+1)*2;
for i:=1 to q-ln do begin;
  move(screenData[p],screenData[r],o);
  dec(p,screenMaxX);
  dec(r,screenMaxX);
  end;
for o:=1 to ln do begin;
  p:=r;
  for i:=x1 to x2 do begin;
    screenData[p].c:=ch;
    screenData[p].a:=co;
    inc(p);
    end;
  dec(r,screenMaxX);
  end;
End;



Procedure doScrollUp(x1,y1,x2,y2,ln,ch,co:LongInt);
Var i,o,p,q,r:LongInt;
Begin;
if (x1<0) then x1:=0;
if (y1<0) then y1:=0;
if (x2>=screenMaxX) then x2:=screenMaxX-1;
if (y2>=screenMaxY) then y2:=screenMaxY-1;
if (x1>x2) then exit;
if (y1>y2) then exit;
if (ln<1) then exit;
q:=y2-y1+1;
if (ln>q) then ln:=q;
r:=y1*screenMaxX+x1;
p:=(ln*screenMaxX)+r;
o:=(x2-x1+1)*2;
for i:=1 to q-ln do begin;
  move(screenData[p],screenData[r],o);
  inc(p,screenMaxX);
  inc(r,screenMaxX);
  end;
for o:=1 to ln do begin;
  p:=r;
  for i:=x1 to x2 do begin;
    screenData[p].c:=ch;
    screenData[p].a:=co;
    inc(p);
    end;
  inc(r,screenMaxX);
  end;
End;



Procedure doScrollRight(x1,y1,x2,y2,ln,ch,co:LongInt);
Var i,o,p,q,r:LongInt;
Begin;
if (x1<0) then x1:=0;
if (y1<0) then y1:=0;
if (x2>=screenMaxX) then x2:=screenMaxX-1;
if (y2>=screenMaxY) then y2:=screenMaxY-1;
if (x1>x2) then exit;
if (y1>y2) then exit;
if (ln<1) then exit;
q:=x2-x1+1;
if (ln>q) then ln:=q;
p:=y1*screenMaxX+x1;
r:=ln+p;
o:=(x2-x1-ln+1)*2;
for i:=y1 to y2 do begin;
  move(screenData[p],screenData[r],o);
  inc(p,screenMaxX);
  inc(r,screenMaxX);
  end;
x2:=x1+ln-1;
r:=y1*screenMaxX+x1;
for o:=y1 to y2 do begin;
  p:=r;
  for i:=x1 to x2 do begin;
    screenData[p].c:=ch;
    screenData[p].a:=co;
    inc(p);
    end;
  inc(r,screenMaxX);
  end;
End;



Procedure doScrollLeft(x1,y1,x2,y2,ln,ch,co:LongInt);
Var i,o,p,q,r:LongInt;
Begin;
if (x1<0) then x1:=0;
if (y1<0) then y1:=0;
if (x2>=screenMaxX) then x2:=screenMaxX-1;
if (y2>=screenMaxY) then y2:=screenMaxY-1;
if (x1>x2) then exit;
if (y1>y2) then exit;
if (ln<1) then exit;
q:=x2-x1+1;
if (ln>q) then ln:=q;
p:=y1*screenMaxX+x1;
r:=ln+p;
o:=(x2-x1-ln+1)*2;
for i:=y1 to y2 do begin;
  move(screenData[r],screenData[p],o);
  inc(p,screenMaxX);
  inc(r,screenMaxX);
  end;
x1:=x2-ln+1;
r:=y1*screenMaxX+x1;
for o:=y1 to y2 do begin;
  p:=r;
  for i:=x1 to x2 do begin;
    screenData[p].c:=ch;
    screenData[p].a:=co;
    inc(p);
    end;
  inc(r,screenMaxX);
  end;
End;
